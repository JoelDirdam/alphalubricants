<div class="products-container">
  <div class="flex flex-col md:flex-row items-center justify-between title">
    <h1 class="font-bold text-5xl color-title">Nuestros productos</h1>
    <div class="relative mt-4 md:mt-0">
      <input list="product-names" type="text" placeholder="buscar..."
        class="pl-12 pr-4 py-2 border border-blue-500 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-blue-500"
        (change)="onProductSelect($event)">
      <datalist id="product-names">
        <option *ngFor="let product of products" [value]="product.name"></option>
      </datalist>
      <svg id="search-input-icon" class="w-6 h-6 text-blue-500 absolute left-3 top-1/2 transform -translate-y-1/2"
        fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"></path>
      </svg>
    </div>
  </div>

  <div *ngIf="selectedProduct" class="selected-product-container">
    <div class="flex flex-col md:flex-row items-start justify-start">
      <button (click)="deselectProduct()" class="back-button">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <div class="flex-shrink-0">
        <img [src]="selectedProduct.image" alt="{{ selectedProduct.name }}" class="h-48 w-auto mx-auto md:mx-0">
      </div>
      <div class="flex flex-col items-start md:ml-8 mt-4 md:mt-0">
        <h2 class="font-bold text-2xl text-blue-500">{{ selectedProduct.name }}</h2>
        <p class="mt-4">{{ selectedProduct.description }}</p>
        <button (click)="openPDF(selectedProduct.url)"
          class="custom-button bg-yellow-500 text-white py-2 px-4 rounded-md mt-4 hover:bg-yellow-600">
          Ficha Técnica →
        </button>
      </div>
    </div>
  </div>

  <div class="product-carousel justify-center lg:justify-between">
    <div class="product max-w-xs rounded-lg overflow-hidden m-4 flex flex-col" *ngFor="let product of filteredProducts">
      <div class="flex-grow">
        <img [src]="product.image" alt="{{ product.name }}" class="h-24 sm:h-25 md:h-32 lg:h-48 w-auto mx-auto">
        <h2 class="font-bold text-xl mt-2 text-center">{{ product.name }}</h2>
      </div>
      <div class="mt-4">
        <button (click)="selectProduct(product)"
          class="custom-button bg-red-500 text-white py-2 px-4 rounded-xlg hover:bg-red-600">
          Más información →
        </button>
        <button (click)="openPDF(product.url)"
          class="custom-button bg-yellow-500 text-white py-2 px-4 rounded-xlg mt-2 hover:bg-yellow-600">
          Ficha Técnica →
        </button>
      </div>
    </div>
  </div>
</div>